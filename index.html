<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <!--
      Configure the viewport for responsive layouts on modern smartphones.  The
      `viewport-fit=cover` value allows the page to extend into the safe‑area
      on devices with notches or rounded corners (e.g. newer iPhones and some
      Samsung models).  A scaling factor of 1 prevents automatic zooming.
    -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <title>KPI‑F18 Final Outgoing Inspection & Transfer Report</title>
    <link rel="stylesheet" href="css/style.css" />
    <!-- jsPDF library for PDF generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" defer></script>
    <!-- Load supporting data lists and sampling plan calculation -->
    <script src="js/partsList.js" defer></script>
    <script src="js/samplingPlan.js" defer></script>
    <script src="js/inspectorList.js" defer></script>
    <script src="js/brandList.js" defer></script>
    <!-- Main script for KPI‑F18 form functionality -->
    <script src="js/kpi-f18.js" defer></script>
  </head>
  <body>
    <div class="container">
      <h1>KPI‑F18 Final Outgoing Inspection & Transfer Report</h1>
      <form id="f18Form">
        <!-- Section A: General Information -->
        <fieldset id="sectionA">
          <legend>Section A: General Information</legend>
          <label>
            Date:
            <input type="date" name="date" required />
          </label>
          <label>
            PO Number:
            <input type="text" name="poNumber" required />
          </label>
          <label>
            Inspector Name:
            <!-- Use a select so users pick from a predefined list of inspectors -->
            <select name="inspectorName" id="inspectorName" required>
              <option value="">-- Select Inspector --</option>
            </select>
          </label>
          <label>
            Shift:
            <select name="shift">
              <option value="Day">Day</option>
              <option value="Night">Night</option>
            </select>
          </label>
          <label>
            Product / Part Name:
            <!-- Populate this select from partsList.js -->
            <select name="productName" id="productName" required>
              <option value="">-- Select Part --</option>
            </select>
          </label>
          <label>
            Brand:
            <!-- Brand options are defined in brandList.js -->
            <select name="brandName" id="brandName" required>
              <option value="">-- Select Brand --</option>
            </select>
          </label>
          <label>
            Lot No./Batch ID:
            <input type="text" name="lotNumber" />
          </label>
          <label>
            Total Quantity in Lot:
            <!--
              The pattern attribute hints mobile browsers to display a numeric
              keypad rather than a full keyboard.  This makes entering
              quantities easier on smartphones.  We retain `min="0"` to
              disallow negative quantities.
            -->
            <input type="number" name="totalQty" id="totalQty" min="0" pattern="[0-9]*" />
          </label>
          <label>
            Sample Size (pcs):
            <!-- Read‑only; calculated automatically from totalQty and AQL level -->
            <!-- Sample size is read‑only and still marked as a number so it
                 displays a numeric keyboard when focused on mobile devices. -->
            <input type="number" name="sampleSize" id="sampleSize" pattern="[0-9]*" readonly />
          </label>
          <!-- Hidden field to store the computed code letter from the sampling plan -->
          <input type="hidden" name="codeLetter" id="codeLetter" />
          <label>
            AQL Level:
            <!-- Choose the AQL level; code letter is computed automatically -->
            <select name="aql" id="aql" required>
              <option value="">-- Select AQL Level --</option>
              <option value="1.0">1.0</option>
              <option value="2.5">2.5</option>
              <option value="4.0">4.0</option>
            </select>
          </label>
        </fieldset>

        <!-- Section B: Visual & Dimensional Inspection Checklist -->
        <fieldset id="sectionB">
          <legend>Section B: Visual & Dimensional Inspection</legend>
          <div class="checkpoint">
            <span>Surface condition / appearance:</span>
            <label><input type="radio" name="surface" value="OK" /> OK</label>
            <label><input type="radio" name="surface" value="NG" /> NG</label>
            <label><input type="radio" name="surface" value="NA" /> N/A</label>
            <input type="text" name="surfaceRemarks" placeholder="Remarks if NG" />
          </div>
          <div class="checkpoint">
            <span>Color / Finish consistency:</span>
            <label><input type="radio" name="color" value="OK" /> OK</label>
            <label><input type="radio" name="color" value="NG" /> NG</label>
            <label><input type="radio" name="color" value="NA" /> N/A</label>
            <input type="text" name="colorRemarks" placeholder="Remarks if NG" />
          </div>
          <div class="checkpoint">
            <span>Print / marking clarity:</span>
            <label><input type="radio" name="print" value="OK" /> OK</label>
            <label><input type="radio" name="print" value="NG" /> NG</label>
            <label><input type="radio" name="print" value="NA" /> N/A</label>
            <input type="text" name="printRemarks" placeholder="Remarks if NG" />
          </div>
          <div class="checkpoint">
            <span>Assembly completeness:</span>
            <label><input type="radio" name="assembly" value="OK" /> OK</label>
            <label><input type="radio" name="assembly" value="NG" /> NG</label>
            <label><input type="radio" name="assembly" value="NA" /> N/A</label>
            <input type="text" name="assemblyRemarks" placeholder="Remarks if NG" />
          </div>
          <div class="checkpoint">
            <span>Label presence / legibility:</span>
            <label><input type="radio" name="label" value="OK" /> OK</label>
            <label><input type="radio" name="label" value="NG" /> NG</label>
            <label><input type="radio" name="label" value="NA" /> N/A</label>
            <input type="text" name="labelRemarks" placeholder="Remarks if NG" />
          </div>
          <div class="checkpoint">
            <span>Packaging condition:</span>
            <label><input type="radio" name="packaging" value="OK" /> OK</label>
            <label><input type="radio" name="packaging" value="NG" /> NG</label>
            <label><input type="radio" name="packaging" value="NA" /> N/A</label>
            <input type="text" name="packagingRemarks" placeholder="Remarks if NG" />
          </div>
          <div class="checkpoint">
            <span>Dimensional accuracy:</span>
            <label><input type="radio" name="dimension" value="OK" /> OK</label>
            <label><input type="radio" name="dimension" value="NG" /> NG</label>
            <label><input type="radio" name="dimension" value="NA" /> N/A</label>
            <input type="text" name="dimensionRemarks" placeholder="Attach measurement sheet if required" />
          </div>
        </fieldset>

        <!-- Section C: Functional Test Result -->
        <fieldset id="sectionC">
          <legend>Section C: Functional Test Result (if applicable)</legend>
          <label>
            Test Performed:
            <input type="text" name="testPerformed" />
          </label>
          <label>
            Result:
            <select name="testResult">
              <option value="Pass">Pass</option>
              <option value="Fail">Fail</option>
              <option value="Not Applicable">Not Applicable</option>
            </select>
          </label>
        </fieldset>

        <!-- Section D: Disposition & Approval -->
        <fieldset id="sectionD">
          <legend>Section D: Disposition & Approval</legend>
          <label>
            Total Defect Quantity:
            <input type="number" name="defectQty" min="0" pattern="[0-9]*" />
          </label>
          <label>
            Disposition:
            <select name="disposition">
              <option value="Accepted">Accepted</option>
              <option value="Rejected">Rejected</option>
              <option value="Hold for Review">Hold for Review</option>
              <option value="Rework Required">Rework Required</option>
            </select>
          </label>
          <label>
            Remarks:
            <textarea name="dispositionRemarks" rows="3"></textarea>
          </label>
          <label>
            Inspected by (QC) Name:
            <input type="text" name="inspectedBy" />
          </label>
          <label>
            Approved by (QA) Name:
            <!-- Default QA approver populated; editable if needed -->
            <input type="text" name="approvedBy" id="approvedBy" value="Mohd Khirul Anuar" />
          </label>
          <label>
            Date:
            <input type="date" name="approvalDate" />
          </label>
        </fieldset>

        <!-- Section E: Warehouse Transfer Confirmation -->
        <fieldset id="sectionE">
          <legend>Section E: Warehouse Transfer Confirmation (if applicable)</legend>
          <label>
            Quantity Received (pcs):
            <input type="number" name="receivedQty" min="0" pattern="[0-9]*" />
          </label>
          <label>
            Received On (Date):
            <input type="date" name="receivedDate" />
          </label>
          <label>
            Inspected by (Name):
            <input type="text" name="warehouseInspector" />
          </label>
          <label>
            Verified by (Supervisor Name):
            <!-- Default supervisor name populated; editable if needed -->
            <input type="text" name="verifiedBy" id="verifiedBy" value="Lau Seok Ting" />
          </label>
          <label>
            Date:
            <input type="date" name="warehouseDate" />
          </label>
        </fieldset>

        <button type="button" id="downloadPdf">Download PDF</button>
      </form>
    </div>
  </body>
</html>